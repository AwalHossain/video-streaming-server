{"version":3,"file":"auth.routes.js","sourceRoot":"/","sources":["src/app/modules/auth/auth.routes.ts"],"names":[],"mappings":";;;;;;AAAA,sDAAqD;AACrD,6DAAqC;AACrC,uDAAmD;AAEnD,MAAM,MAAM,GAAG,iBAAO,CAAC,MAAM,EAAE,CAAC;AAEhC,MAAM,CAAC,IAAI,CAAC,WAAW,EAAE,gCAAc,CAAC,gBAAgB,CAAC,CAAC;AAE1D,MAAM,CAAC,IAAI,CAAC,QAAQ,EAAE,gCAAc,CAAC,QAAQ,CAAC,CAAC;AAE/C,MAAM,CAAC,GAAG,CAAC,gBAAgB,EAAE,gCAAc,CAAC,YAAY,CAAC,CAAC;AAE1D,MAAM,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC,GAAY,EAAE,GAAa,EAAE,EAAE;IACpD,GAAG,CAAC,QAAQ,CAAC,GAAG,gBAAM,CAAC,QAAQ,CAAC,GAAG,cAAc,CAAC,CAAC;AACrD,CAAC,CAAC,CAAC;AAEH,MAAM,CAAC,GAAG,CAAC,kBAAkB,EAAE,CAAC,GAAY,EAAE,GAAa,EAAE,EAAE;IAC7D,8CAA8C;IAC9C,MAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,kBAAkB,CAAC,GAAG,CAAC,KAAK,CAAC,IAAc,CAAC,CAAC,CAAC;IACtE,OAAO,CAAC,GAAG,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;IAE1B,0DAA0D;IAC1D,GAAG,CAAC,IAAI,CAAC;;oCAEyB,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,gBAAM,CAAC,QAAQ,CAAC,MAAM;;;GAGjF,CAAC,CAAC;AACL,CAAC,CAAC,CAAC;AAEU,QAAA,UAAU,GAAG,MAAM,CAAC","sourcesContent":["import express, { Request, Response } from 'express';\nimport config from '../../../config';\nimport { AuthController } from './auth.controller';\n\nconst router = express.Router();\n\nrouter.post('/register', AuthController.registrationUser);\n\nrouter.post('/login', AuthController.loginUer);\n\nrouter.get('/check-session', AuthController.checkSession);\n\nrouter.get('/google', (req: Request, res: Response) => {\n  res.redirect(`${config.services.api}/auth/google`);\n});\n\nrouter.get('/google/callback', (req: Request, res: Response) => {\n  // Extract the user data from the query string\n  const user = JSON.parse(decodeURIComponent(req.query.user as string));\n  console.log(user, 'user');\n\n  // Send a script that posts a message to the opener window\n  res.send(`\n    <script>\n        window.opener.postMessage(${JSON.stringify(user)}, \"${config.services.client}\");\n        window.close();\n    </script>\n  `);\n});\n\nexport const AuthRoutes = router;\n"]}