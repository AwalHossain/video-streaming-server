{"version":3,"file":"uploadMiddleware.js","sourceRoot":"/","sources":["src/app/middleware/uploadMiddleware.ts"],"names":[],"mappings":";;;;;;AAEA,oDAA4B;AAE5B,MAAM,UAAU,GAAG,KAAK,EACtB,GAAY,EACZ,IAAyB,EACzB,EAAsD,EACtD,EAAE;IACF,IAAI,CAAC;QACH,IACE,IAAI,CAAC,QAAQ,KAAK,WAAW;YAC7B,IAAI,CAAC,QAAQ,KAAK,kBAAkB;YACpC,IAAI,CAAC,QAAQ,KAAK,WAAW;YAC7B,IAAI,CAAC,QAAQ,KAAK,YAAY,EAC9B,CAAC;YACD,EAAE,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;QACjB,CAAC;aAAM,CAAC;YACN,EAAE,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;QAClB,CAAC;IACH,CAAC;IAAC,OAAO,KAAK,EAAE,CAAC;QACf,OAAO,CAAC,GAAG,CAAC,KAAK,EAAE,qBAAqB,CAAC,CAAC;QAC1C,EAAE,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;IACnB,CAAC;AACH,CAAC,CAAC;AAEW,QAAA,gBAAgB,GAAG,IAAA,gBAAM,EAAC;IACrC,OAAO,EAAE,gBAAM,CAAC,aAAa,EAAE;IAC/B,UAAU,EAAE,UAAU;IACtB,MAAM,EAAE;QACN,QAAQ,EAAE,IAAI,GAAG,IAAI,GAAG,EAAE;KAC3B;CACF,CAAC,CAAC","sourcesContent":["/* eslint-disable no-useless-escape */\nimport { Request } from 'express';\nimport multer from 'multer';\n\nconst fileFilter = async (\n  req: Request,\n  file: Express.Multer.File,\n  cb: (error: Error | null, acceptFile: boolean) => void,\n) => {\n  try {\n    if (\n      file.mimetype === 'video/mp4' ||\n      file.mimetype === 'video/x-matroska' ||\n      file.mimetype === 'video/avi' ||\n      file.mimetype === 'video/webm'\n    ) {\n      cb(null, true);\n    } else {\n      cb(null, false);\n    }\n  } catch (error) {\n    console.log(error, 'error in fileFilter');\n    cb(error, false);\n  }\n};\n\nexport const uploadMiddleware = multer({\n  storage: multer.memoryStorage(),\n  fileFilter: fileFilter,\n  limits: {\n    fileSize: 1024 * 1024 * 50,\n  },\n});\n"]}